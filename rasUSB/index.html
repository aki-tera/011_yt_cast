<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>Podcast Creater</title>
  </head>

  <body>
    <form id="form_url">
      <div>
        <label>Youtube URL</label>
        <input type="url" id="url" value="" size="50">
      </div>
      <p>
      <button type="submit" class="get_title">Get title</button>
    </form>
    <div id="result">
    </div>





<!--jqueryの開始-->
<!--jqueryのダウンロード-->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript">
<!--htmlファイルの読み込み後に以下を実行すること-->
    $(document).ready(function() {
<!--formタグを対象として処理をする-->
      $('#form_url').submit(function() {
<!--Ajaxで送信するので、通常のフォーム送信はキャンセル-->
        event.preventDefault();
<!--thisは現在動作している要素を示すが、なんのためか不明-->
        var $form = $(this);
<!--送信する内容-->
        $.ajax({
          url: '/cgi-bin/yt_check.py',
          type: 'post',
          dataType: 'text',
          data: {
            url: $('#url').val(),
          },
        })
<!--非同期通信のまま返り値をもらう-->
        .done(function(response) {
          $('#result').html(response);
        })
        .fail(function() {
          $('#result').html('Failed.');
        });
      });
<!--追加されたボタンの処理-->
      $('#result').on('click', '#btn_get', function() {
        var test = $('#url').val();
        alert( test );
      });
    });
    </script>
  </body>
</html>
